{% extends "news/base.html" %}
{% load static %}

{% block content %}

<div class="container mx-auto px-4 py-6 flex flex-col lg:flex-row gap-6 bg-white rounded shadow overflow-y-scroll">

  
  <!-- Main Content Area -->
  
  <div class="basis-full lg:basis-[65%]">

    <h2 class="text-2xl text-center font-bold mb-6 bg-white rounded shadow">Latest News</h2>

    <!-- Full-width First Article -->
    {% if page_obj|length > 0 %}
<div class="relative w-full mb-6">
    <!-- Carousel wrapper -->
    <div class="relative h-15 overflow-hidden rounded-lg md:h-96" id="customCarousel">
        {% for item in page_obj|slice:":5" %}
        <div class="{% if forloop.first %}block{% else %}hidden{% endif %} duration-700 ease-in-out carousel-slide">
            {% include "news/_article_cards.html" %}
        </div>
        {% endfor %}
    </div>

    <!-- Controls -->
  <style>
@media (max-width: 639px) {
  .carousel-btn {
    display: none !important;
  }
}
</style>

<button type="button" class="carousel-btn absolute top-0 left-0 z-10 flex items-center justify-center h-full px-4 mx-4 mt-6 cursor-pointer group focus:outline-none" onclick="moveSlide(-1)">
    <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50">
       <i class="fa fa-angle-right text-white"></i>
    </span>
</button>

<button type="button" class="carousel-btn absolute top-0 right-0 z-10 flex items-center justify-center h-full px-4 mt-6 cursor-pointer group focus:outline-none" onclick="moveSlide(1)">
    <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50">
        <i class="fa fa-angle-left text-white"></i>
    </span>
</button>


</div>
{% endif %}
  

    
    <!-- 2x2 Grid for Articles 2-5 -->
       <h2 class="text-2xl font-bold mb-6 bg-white rounded shadow p-4 flex justify-between items-center">
  <span>Business</span>
  <div class="space-x-2">
    <a href="#"><button id="politics-prev" class="px-3 py-1 bg-white rounded shadow hover:bg-red-700 ">&lsaquo;</button>
    <button id="politics-next" class="px-3 py-1 bg-white rounded shadow hover:bg-red-700 ">&rsaquo;</button></a>
  </div>
</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6">
      
      {% for item in page_obj|slice:"5:9" %}
        {% include "news/_article_cards.html" %}
      {% endfor %}
    </div>

    <!-- 3-column Grid for Articles 6+ -->
     <h2 class="text-2xl font-bold mb-6 bg-white rounded shadow p-4 flex justify-between items-center">
  <span>Politics</span>
  <div class="space-x-2">
    <a href="#"><button id="politics-prev" class="px-3 py-1 bg-white rounded shadow hover:bg-red-700 ">&lsaquo;</button>
    <button id="politics-next" class="px-3 py-1 bg-white rounded shadow hover:bg-red-700 ">&rsaquo;</button></a>
  </div>
</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for item in page_obj|slice:"9:" %}
        {% include "news/_article_cards.html" %}
      {% endfor %}
    </div>

  </div>

  <!-- Sidebar -->
 <aside class="basis-full lg:basis-[35%]">
     {% include "news/_sidebar.html" %}
   </aside>

</div>

{% endblock %}

{% block extra_js %}

<script>
let currentIndex = 0;
const slides = document.querySelectorAll('#customCarousel .carousel-slide');

function showSlide(index) {
    slides.forEach((slide, i) => {
        slide.classList.toggle('hidden', i !== index);
        slide.classList.toggle('block', i === index);
    });
}

function moveSlide(step) {
    currentIndex = (currentIndex + step + slides.length) % slides.length;
    showSlide(currentIndex);
}

// Optional: auto-slide every 5s
setInterval(() => moveSlide(1), 5000);
</script>
{% endblock %}